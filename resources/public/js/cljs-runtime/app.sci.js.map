{"version":3,"sources":["app/sci.cljs"],"mappings":"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","names":["ret__4913__auto__","&form","&env","cljs.core.sequence","cljs.core/seq","cljs.core.concat","cljs.core/List","cljs.core/vec","app.sci/time","expr","app.sci/clj-ns","sci.core.create_ns","app.sci/namespaces","ns__54833__auto__","var__54834__auto__","val__54835__auto__","cljs.core/deref","m__54836__auto__","cljs.core/meta","ns-name__54837__auto__","name__54838__auto__","name-sym__54839__auto__","cljs.core.symbol","new-m__54840__auto__","sci.core.new_dynamic_var","sci.core.new_macro_var","sci.core.new_var","cljs.core/system-time","js/app","js/app.sci","js/app.sci.init-opts","app.sci/init-opts","js/window","js/app.sci.context","app.sci/context","cljs.core.atom","sci.core/init","app.sci/set-print-fn","f","sci.core/alter-var-root","sci.core/print-fn","cljs.core/constantly","app.sci/extend-ctx","opts","cljs.core/reset!","sci.core/merge-opts","app.sci/eval-string","source","e60540","sci.core/eval-string*","e","app.error/error-handler","sci-error?","cljs.core.isa_QMARK_","cljs.core/ex-data","or__4253__auto__","cljs.core/ex-cause"],"sourcesContent":["(ns app.sci\n  (:refer-clojure :exclude [time])\n  (:require\n   [sci.core :as sci]\n   [app.error :as error]))\n\n(clojure.core/defmacro time\n  \"Evaluates expr and prints the time it took. Returns the value of expr.\"\n  [expr]\n  `(let [start# (cljs.core/system-time)\n         ret# ~expr]\n     (prn (cljs.core/str \"Elapsed time: \"\n                         (.toFixed (- (system-time) start#) 6)\n                         \" msecs\"))\n     ret#))\n\n(def clj-ns (sci/create-ns 'clojure.core nil))\n\n(def namespaces\n  {'clojure.core\n   {'time (sci/copy-var time clj-ns)\n    'system-time (sci/copy-var system-time clj-ns)}})\n\n;; Default sci options\n(defonce init-opts {:classes {'js js/window\n                              :allow :all}\n                    :namespaces namespaces})\n\n;; Sci context inside an atom\n(defonce context (atom (sci/init init-opts)))\n\n(defn set-print-fn\n  \"Setup a custom `print-fn` for sci.\"\n  [f]\n  (sci/alter-var-root sci/print-fn (constantly f)))\n\n(defn extend-ctx\n  \"Extend default sci context merging `opts`.\"\n  [opts]\n  (reset! context (sci/merge-opts @context opts)))\n\n(defn eval-string\n  \"Evaluate `source` using sci and return the output\n  or raise throw an exception in case of error.\"\n  [source]\n  (try (sci/eval-string* @context source)\n       (catch :default e\n         (error/error-handler e (:src context))\n         (let [sci-error? (isa? (:type (ex-data e)) :sci/error)]\n           (throw (if sci-error?\n                    (or (ex-cause e) e)\n                    e))))))\n"]}